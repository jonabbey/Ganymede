<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Ganymede Data Loading/Dumping in XML</title>
  </head>

  <body bgcolor="#FFFFFF">
    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>Ganymede Object Data Import/Export Definition in XML</b></h2></td>
      </tr>
    </table>


    <p>While the Ganymede server is capable of expressing its schema
    definition information in the <b>&lt;ganyschema&gt;</b> section of
    its XML file, this aspect of Ganymede's XML support is bound to be
    much less used than the data dumping and loading support.  This
    section discusses the <b>&lt;ganydata&gt;</b> element that may be
    present in the Ganymede XML file format.</p>

<center><table border="1" cellpadding="5" width="80%" >
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="GANYDATA">&lt;ganydata&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;ganydata&gt;</b> element is a container for object data to
be updated on the server.  When exported, the <b>&lt;ganydata&gt;</b>
element contains a complete dump of the server's data state.  When
imported, the <b>&lt;ganydata&gt;</b> element can contain an
optional <b>&lt;comment&gt;</b> element describing the transaction to
be committed, and a collection of <b>&lt;object&gt;</b> elements which
specify the objects to be created, edited, inactivated, or deleted.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td><b><code>ganymede</code></b></td>
<td><a href="#COMMENT">&lt;comment&gt;</a>, <a href="#OBJECT">&lt;object&gt;</a></td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">None</td>
</tr>

</table></center>

    <p>The <b>&lt;ganydata&gt;</b> element can contain an
    optional <b>&lt;comment&gt;</b> element containing text describing
    the purpose of the transaction to be committed by the Ganymede
    server on successful processing of the <b>&lt;object&gt;</b>
    elements.  The text in the <b>&lt;comment&gt;</b> element will be
    included in all email generated by the Ganymede server in response
    to the transaction, and will be included in all logging related to
    the transaction.</p>

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="COMMENT">&lt;comment&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
  <p>The optional <b>&lt;comment&gt;</b> element contains a text
  string describing the transaction to be performed.  Any text
  contained by this element will be included in all email and logging
  generated for the transaction committed in response to the
  processing of the <b>&lt;ganydata&gt;</b> element.</p>

  <p>The <b>&lt;comment&gt;</b> element will never be generated when
  dumping data with xmlclient.  It is only meaningful when submitting
  change requests to the Ganymede server.</p>

  <p>If the <b>&lt;comment&gt;</b> element contains anything other
  than character data, the contents of the <b>&lt;comment&gt;</b>
  element will be disregarded.  You may not include HTML or other
  XML-formatted text within the <b>&lt;comment&gt;</b> element.</p>
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td><a href="#GANYDATA">&lt;ganydata&gt;</a></td>
<td>Character data.</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;comment&gt;This server was decommissioned three years back, but never removed from Ganymede.&lt;/comment&gt;</code></td></tr>

</table>
</center>

    <p>The <b>&lt;ganydata&gt;</b> element contains a series of
    <b>&lt;object&gt;</b> elements, each one corresponding to an
    object in the Ganymede database.  The <b>&lt;object&gt;</b>
    element itself may contain one element for each field in the
    object.  The open tag for the <b>object</b> element as exported
    contains possibly four attributes, those being <b>type</b>
    (required), <b>id</b>, <b>num</b>, and <b>action</b>.</p>

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="OBJECT">&lt;object&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;object&gt;</b> element contains data for a single object.  When exported, the <b>&lt;object&gt;</b>
element contains a complete dump of the object's state, minus the historical fields (last modification data, etc.).When
imported, the <b>&lt;object&gt;</b> element contains a collection of field elements
whose contents are to be transmitted to the server to update the object identified by the
<b>&lt;object&gt;</b>'s attributes.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td><a href="#GANYDATA">&lt;ganydata&gt;</a></td>
<td>Various field elements, each with a unique tag name based on the name of the corresponding server field</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>type</b></dt>
<dd>The name of the type this object belongs to.  This string
is case sensitive and must match the <b>name</b> attribute for
the type's <b>&lt;objectdef&gt;</b> element, which is the object's
type name with <a href="#underscore">underscores substituted for spaces</a>.</dd>

<dt><b>id</b></dt>

<dd>An optional identifier string for this object, unique among
objects of this type within the <b>&lt;ganydata&gt;</b> element in
this XML file.  If this string is not present, the <b>num</b>
attribute becomes mandatory. The <b>id</b> attribute is used for two
purposes; the first is to identify an object on the server to be
edited, inactivated or deleted if the <b>action</b> attribute
specifies these actions.  The second is to act as a target for
<b>&lt;invid&gt;</b> elements within the XML file to use to refer to
<b>&lt;object&gt;</b> elements that are created during the XML file
processing.  Each use is contingent on the id attribute of
<b>&lt;object&gt;</b> and <b>&lt;invid&gt;</b> elements matching the
server's idea of what the label of the object is.</dd>

<dt><b>num</b></dt>

<dd>An optional object number for this object, unique among objects of
this type on the server.  If this number is not present, the <b>id</b>
attribute becomes mandatory.  If both the <b>id</b> and <b>num</b>
attributes are present, the <b>id</b> attribute takes precedence.  The
number contained in this attribute corresponds to the Invid object
number for the object designated by this <b>&lt;object&gt;</b>
element.  The <b>num</b> attribute is used to select pre-existing
objects on the server for editing, inactivation, or deletion.  If this
<b>&lt;object&gt;</b> has an <b>action</b> attribute value that would
cause a new object to be created on the Ganymede server, the
<b>num</b> attribute is simply ignored.  It is an error to specify a <b>num</b>
attribute for an object that does not already exist on the server at
the time the xml file is processed.</dd>

<dt><b>oid</b></dt>

<dd><p>This attribute is provided when an object is dumped out by a <a
href="../synchronization/index.html" target="_top">Sync Channel</a>.  It is a globally
unique identifier which encodes both the type of the object and its
unique id number.</p>

<p>This attribute is disregarded when loading data.</p></dd>

<dt><b>action</b></dt>

<dd>
The <b>action</b> attribute is optional, and plays a role only in
XML data importing.  If the <b>action</b> attribute is present, it may
contain one of four strings:

<ul>
<li>create</li>
<li>edit</li>
<li>inactivate</li>
<li>delete</li>
</ul>

<p>
If there is no <b>action</b> attribute specified at import time, the
<b>&lt;object&gt;</b> element will be created if the object has a
<b>id</b> attribute and no <b>num</b> attribute and if there is no
object already on the server that matches the <b>id</b> attribute.
Otherwise, the pre-existing object on the Ganymede server matching the
identifying attribute will be checked out for editing.
</p>

<p>
If the <b>action</b> attribute is present and contains
<b>"create"</b>, the <b>&lt;object&gt;</b> element will cause the
Ganymede xmlclient to create a new object.  In addition, in such cases
all <b>&lt;invid&gt;</b> elements in the XML file with
matching <b>type</b> and <b>id</b> attributes will be interpreted to
be referring to the newly created
<b>&lt;object&gt;</b> element.</p>

<p>If the <b>action</b> attribute is present and contains <b>"edit"</b>,
the <b>&lt;object&gt;</b> element will cause the Ganymede xmlclient
to seek to check the object out for editing from the server.  If no
object exists on the server matching the <b>id</b> attribute, an
error will be displayed and xmlclient will abort the transaction.</p>

<p>In the unspecified, <b>"create"</b>, and <b>"edit"</b> cases, the
object element will typically contain a set of field elements.  In the
<b>"inactivate"</b> and <b>"delete"</b> cases, the
<b>&lt;object&gt;</b> element must be empty, and the xmlclient will
simply attempt to inactivate or delete the object identified by the
<b>id</b> or <b>num</b> attributes.</p>

</dd>

</dl>
</td>
</tr>
</table></center>

<p>Aside from the special case of object inactivation or deletion, all
&lt;object&gt; elements in a &lt;ganydata&gt; section will contain a
set of elements that correspond to fields in the object to be created
or edited on the server.  The elements for these fields have no fixed
tag name.  Instead, each field element will start with an open tag
that is named according to the name of the field, with spaces
transformed into underscores.</p>

<p>For instance, a record to change the values of the "Room",
"Groups", "Home Group" and "Email Aliases" fields in a pre-existing
object on the server would be represented in the XML file as:</p>

<pre>
  &lt;object type="User" id="broccol" action="edit"&gt;
    &lt;Room&gt;S321&lt;/Room&gt;
    &lt;Groups&gt;
        &lt;invid type="Group" id="omssys"/&gt;
        &lt;invid type="Group" id="omsnet"/&gt;
    &lt;/Groups&gt;
    &lt;Home_Group&gt;&lt;invid type="Group" id="omssys"/&gt;&lt;/Home_Group&gt;
    &lt;Email_Aliases&gt;
        &lt;string val="abbey"/&gt;
        &lt;string val="jonabbey"/&gt;
    &lt;/Email_Aliases&gt;
  &lt;/object&gt;
</pre>

<p>An &lt;object&gt; element contains nothing but such field elements,
all of which lack any sort of attributes.  The field elements
themselves, however, will contain a variety of kinds of elements,
depending on the field type.  In the above example, the "Room" field
is a scalar String field, the "Groups" field is a vector Invid/object
reference field, the "Home Group" field is a scalar Invid/object
reference field, and the "Email Aliases" field is a vector String
field.</p>

<p>In the above example, the <b>Groups</b> and <b>Email_Aliases</b>
vector field elements both contain a couple of items.  These items
will be added to those fields if they are not already present, but the
xmlclient will not remove any other items which may already be in
those fields.</p>

<p>If you want to assure that after xmlclient finishes its work that
there will only be a given list of items in a vector field, you need
to do this:</p>

<pre>
  &lt;object type="User" id="broccol" action="edit"&gt;
    &lt;Room&gt;S321&lt;/Room&gt;
    &lt;Groups&gt;
        &lt;set&gt;
            &lt;invid type="Group" id="omssys"/&gt;
            &lt;invid type="Group" id="omsnet"/&gt;
        &lt;/set&gt;
    &lt;/Groups&gt;
  &lt;/object&gt;
</pre>

<p>In this example, the <b>&lt;set&gt;</b> container element will
force the xmlclient to set the <b>Groups</b> field to contain only
the two items listed, adding or removing items as necessary.</p>

<p>You can also manually add or remove individual items, using
<b>&lt;add&gt;</b>, <b>&lt;addIfNotPresent&gt;</b>, and <b>&lt;delete&gt;</b>:</p>

<pre>
  &lt;object type="User" id="broccol" action="edit"&gt;
    &lt;Room&gt;S321&lt;/Room&gt;
    &lt;Groups&gt;
        &lt;add&gt;
            &lt;invid type="Group" id="omsovr"/&gt;
        &lt;/add&gt;
        &lt;delete&gt;
            &lt;invid type="Group" id="omsnet"/&gt;
        &lt;/delete&gt;
    &lt;/Groups&gt;
  &lt;/object&gt;
</pre>

<p>This will cause the omsovr group to be added and the omsnet group
to be removed.  You can have as many <b>&lt;add&gt;</b>,
<b>&lt;addIfNotPresent&gt;</b> and <b>&lt;delete&gt;</b> containers as
you want within a vector field, but <b>&lt;add&gt;</b>,
<b>&lt;addIfNotPresent&gt;</b> and <b>&lt;delete&gt;</b> are not
compatible with <b>&lt;set&gt;</b>.  If you use <b>&lt;set&gt;</b>,
you may not use <b>&lt;add&gt;</b>, <b>&lt;addIfNotPresent&gt;</b> or
<b>&lt;delete&gt;</b> as well.</p>

<p>If you don't specify <b>&lt;add&gt;</b>,
<b>&lt;addIfNotPresent&gt;</b>, <b>&lt;delete&gt;</b>, or
<b>&lt;set&gt;</b>, the xmlclient will treat the items as belonging to
an <b>&lt;addIfNotPresent&gt;</b> container.  For this reason, the
following is not allowed:</p>

<pre>
  &lt;object type="User" id="broccol" action="edit"&gt;
    &lt;Room&gt;S321&lt;/Room&gt;
    &lt;Groups&gt;
        &lt;invid type="Group" id="omsovr"/&gt;
        &lt;set&gt;
            &lt;invid type="Group" id="omssys"/&gt;
            &lt;invid type="Group" id="omsnet"/&gt;
        &lt;/set&gt;
    &lt;/Groups&gt;
  &lt;/object&gt;
</pre>

<p>because the omsovr element is considered to be in an
<b>&lt;addIfNotPresent&gt;</b>, which may not co-exist with a
<b>&lt;set&gt;</b> in a single field element.</p>

<p>There are presently ten different types of data fields supported
by the Ganymede server, and each of these types has its own rules as
to what kinds of elements are allowed within the field element and how
they may be structured.  For the most part, these rules are very similar
for all field types, with just the value carrying element type differing.
The following table shows the data carrying element types that correspond
to the ten field types.</p>

<!-- STRING -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="STRING">&lt;string&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;string&gt;</b> element contains data for Ganymede string fields,
but is mandatory only for vector string fields.  The
<b>&lt;string&gt;</b> element is not necessary for scalar string
fields, which support simply placing the content to be placed in the
string field directly between the field element's open and close tags.
If the <b>&lt;string&gt;</b> element is used for string field content,
it must be empty.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt>
<dd>The contents of the mandatory <b>val</b> attribute actually holds the string value
corresponding to this &lt;string&gt; element.  As with all XML attributes, double quote
characters must be replaced by '<b>&amp;quot;</b>', naked ampersands must be replaced
by '<b>&amp;amp;</b>', and anything goes otherwise, including embedded newlines.</dd>

</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;string val="broccol"/&gt;</code></td></tr>

</table></center>

<!-- BOOLEAN -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="BOOLEAN">&lt;boolean&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
<p>The <b>&lt;boolean&gt;</b> element is an optional data element for
Ganymede boolean fields.  Since Ganymede boolean fields are always
scalar, you can simply place <b>true</b>, <b>t</b>, <b>false</b> or
<b>f</b> (of whatever capitalization) between the field's start and
end tags.  If you do use the older <b>&lt;boolean&gt;</b> element as a
data container, the <b>&lt;boolean&gt;</b> element must be empty.</p>
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt>
<dd>The contents of the mandatory <b>val</b> attribute holds
a string corresponding to the value of
this &lt;boolean&gt; element. "<b>1</b>", "<b>true</b>",
"<b>t</b>", "<b>yes</b>", and "<b>y</b>", of whatever capitalization,
all correspond to a true value. Any other value corresponds to a
false value.  Note that this is a looser standard than is allowed
if you use a text string to represent the true or false value outside
of the &lt;boolean&gt; element's val <b>val</b> attribute.  In that
case, you must use <b>true</b>, <b>t</b>, <b>false</b>, or <b>f</b>,
of whatever capitalization.</dd>
</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;boolean val="true"/&gt;</code></td></tr>

</table></center>

<!-- INT -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="INT">&lt;int&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
<p>The <b>&lt;int&gt;</b> element is an optional data element for
Ganymede numeric fields.  Since Ganymede numeric fields are always
scalar, you can simply place a 32 bit signed integer value between the
containing field's start and end tags. If you do use the older
<b>&lt;int&gt;</b> element as a data container, the <b>&lt;int&gt;</b>
element must be empty.</p>
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt>
<dd>The contents of the mandatory <b>val</b> attribute actually holds
the integer value corresponding to this &lt;int&gt; element.  This
attribute can hold integer values in the range -4294967296 to
4294967295.  The only characters allowed in this attribute value are
the numeric digits and the minus sign.  This same range holds if
you skip the &lt;int&gt; element and just place the numeric value
between the start and end tags of the containing field element.</dd>
</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;int val="12042"/&gt;</code></td></tr>

</table></center>

<!-- FLOAT -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="FLOAT">&lt;float&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;float&gt;</b> element contains a 64 bit floating point
value, corresponding to the IEEE 754-1985 specification, for use
with Ganymede float fields.
As float fields are scalar in Ganymede, only
one <b>&lt;float&gt;</b> element at a time may be contained in a float field
element.  The <b>&lt;float&gt;</b> element must be empty.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt>
<dd>The contents of the mandatory <b>val</b> attribute actually holds
the 64 bit float value corresponding to this &lt;float&gt; element.  This
attribute can hold floating point values corresponding to the
64 bit floating point value specified by IEEE 754-1985 specification.  The text
of this attribute must conform to the rules specified in the java.lang.Double
class, which generally corresponds to normal rules of ASCII floating point
number representation, with support for numbers of the form
6.04E+25 in scientific notation for very large or very small numbers.</dd>
</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;float val="3.141596254"/&gt;</code></td></tr>

</table></center>

<!-- IP -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="IP">&lt;ip&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;ip&gt;</b> element contains an IPv4 or IPv6 address.  IP
fields may be scalar or vector in Ganymede. The <b>&lt;ip&gt;</b>
element must be empty.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt> <dd>The contents of the mandatory <b>val</b>
attribute holds an IPv4 string in standard dotted decimal form, or an
IPv6 string, in any RFC 1884 format.  The Ganymede server will decide,
based on its configuration, whether an IPv6 address will be accepted.
Even if the Ganymede server is configured to allow IPv6, IPv4 strings
will always be accepted, given that all IPv4 addresses have a
canonical mapping into IPv6 addresses, according to the rules of
IPv6.</dd>
</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;ip val="127.0.0.1"/&gt;</code>, <code>&lt;ip val="::1"/&gt;</code>, <code>&lt;ip val="::FFFF:127.0.0.1"/&gt;</code>
<p>All of these examples encode a loopback address, in either IPv4 or IPv6 form.</p></td></tr>

</table></center>

<!-- DATE -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="DATE">&lt;date&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;date&gt;</b> element contains a Java date value, which is effectively a 64 bit
time stamp with millisecond resolution centered at Midnight, January 1, 1970, UTC.
As date fields are scalar in Ganymede, only
one <b>&lt;date&gt;</b> element at a time may be contained in a field
element.  The <b>&lt;date&gt;</b> element must be empty.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>val</b></dt>

<dd>The contents of the <b>val</b> attribute contains a human readable
representation of the time stamp held in this &lt;date&gt; element.
The <b>val</b> attribute takes data strings of the form "<b>Sun, 03
Dec 1995 00:00:00</b>", in which case the date is interpreted in the
local timezone of the machine running the xmlclient or "<b>Sun, 03 Dec
1995 00:00:00 CDT</b>", in which the date will be interpreted by the
specified timezone.  The standard UNIX date format "<b>Tue Jul 11
01:18:21 CDT 2000</b>" is also supported. The precise form of date val
string that may be parsed by the xmlclient, in particular the
characters of the date and month, may differ according to the default
Java locale of the JVM running the xmlclient.  To avoid any
possibility for imprecision, it may be necessary to instead use the
<b>timecode</b> attribute.</dd>

<dt><b>timecode</b></dt>
<dd>The contents of the <b>timecode</b> attribute contains a 64 bit
signed integer, corresponding to the number of milliseconds before or
after Midnight, January 1, 1970, UTC.  In order to use a UNIX-style 32 bit
timecode to fill in the <b>timecode</b> attribute, you can simply
multiply a 32 bit timecode by 1,000.</dd>

</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;date val="Wed 28 Jun 2000 13:13:02" timecode="962215982000"/&gt;</code></td></tr>

</table></center>

<!-- PASSWORD -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="PASSWORD">&lt;password&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
<p>The <b>&lt;password&gt;</b> element contains a Java password value.
As password fields are scalar in Ganymede, only one
<b>&lt;password&gt;</b> element at a time may be contained in a field
element.  The <b>&lt;password&gt;</b> element must be empty.  The
<b>&lt;password&gt;</b> element may contain any or all of the eight
optional attributes: <b>plaintext</b>, <b>crypt</b>, <b>md5crypt</b>,
<b>apachemd5crypt</b>, <b>lanman</b>, <b>ntmd4</b>, <b>ssha</b>,
<b>shaUnixCrypt</b>, and <b>bCrypt</b>.</p>

<p>If the <b>plaintext</b> attribute is present,
all other hashes will be ignored when the client submits a
<b>&lt;password&gt;</b> element, and the Ganymede server will generate
new hashes as needed from the plaintext given. If none of the optional
attributes are present, the password field will be cleared. All of
these options are explained below.</p>

<p>If the <b>plaintext</b> attribute is not present but one or more of
the hash attributes are, Ganymede will replace any previous
information held in this field with information for the hashes you
specified.  If a Ganymede build process requires hash information that
you did not provide when you submitted this <b>&lt;password&gt;</b>
element, you may have problems.</p>

<p>In general, it is best to pass plaintext information to Ganymede
when you want to tell Ganymede about a password change, but you can
provide pre-hashed password data to Ganymede if you are comfortable
about the limitations you might run into.</p>

</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>plaintext</b></dt>

<dd><p>This attribute, if present, contains a password string in plain
text.  The client will transmit this password to the server, which
will generate any needed hash formats according to the schema
configuration for this field. If <b>plaintext</b> is specified, all
other hash information in this element will be ignored.</p></dd>

<dt><b>crypt</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in UNIX crypt() format.  The client will transmit this hash text to
the server, where it and any other hash text simultaneously provided
will be retained.  This attribute has no effect if the
<b>plaintext</b> attribute is specified.</p></dd>

<dt><b>md5crypt</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in FreeBSD-style md5Crypt() format.  The client will transmit this
hash text to the server, where it and any other hash text
simultaneously provided will be retained.  This attribute has no
effect if the <b>plaintext</b> attribute is specified.</p></dd>

<dt><b>apachemd5crypt</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in Apache-style md5Crypt() format.  The client will transmit this hash
text to the server, where it and any other hash text simultaneously
provided will be retained.  This attribute has no effect if the
<b>plaintext</b> attribute is specified.</p></dd>

<dt><b>lanman</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in the LANMAN encoding used by older versions of Windows networking.
This hash format is one of the two password encryption formats used by
the Samba password file.  The client will transmit this hash text to
the server, where it and any other hash text simultaneously provided
will be retained.  This attribute has no effect if the
<b>plaintext</b> attribute is specified.</p></dd>

<dt><b>ntmd4</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in the Unicode-md4 encoding used by Windows NT and Windows 98 and
later. This hash format is one of the two password encryption formats
used by the Samba password file.  The client will transmit this hash
text to the server, where it and any other hash text simultaneously
provided will be retained.  This attribute has no effect if the
<b>plaintext</b> attribute is specified.</p></dd>

<dt><b>ssha</b></dt>

<dd><p>This attribute, if present, contains a password string pre-hashed
in the Salted SHA-1 format used by OpenLDAP.  The client will transmit
this hash text to the server, where it and any other hash text
simultaneously provided will be retained.  This attribute has no
effect if the <b>plaintext</b> attribute is specified.</p></dd>

<dt><b>shaUnixCrypt</b></dt>

<dd><p>This attribute, if present, contains a password string
pre-hashed in Ulrich Drepper's Sha Unix Crypt format.  See <a
href="http://people.redhat.com/drepper/sha-crypt.html" target="_top">http://people.redhat.com/drepper/sha-crypt.html</a>
for a discussion and a link to the specification for this format.</p>

<p>As with the other hash attributes, the client will transmit this
hash text to the server, where it and any other hash text
simultaneously provided will be retained.  This attribute has no
effect if the <b>plaintext</b> attribute is specified.</p></dd>

<dt><b>bCrypt</b></dt>

<dd><p>This attribute, if present, contains a password string
pre-hashed in the OpenBSD BCrypt format</p>

<p>As with the other hash attributes, the client will transmit this
hash text to the server, where it and any other hash text
simultaneously provided will be retained.  This attribute has no
effect if the <b>plaintext</b> attribute is specified.</p></dd>

</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;password md5crypt="$1$o8/.....$f398vnq51gnzf" shaUnixCrypt="$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5"/&gt;</code></td></tr>

</table></center>

<!-- FIELD OPTIONS -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="OPTIONS">&lt;options&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
<p>The <b>&lt;options&gt;</b> element is similar to the <a href="#PERMMATRIX"><b>&lt;permmatrix&gt;</b></a> element,
in that it provides a mapping for object and field types defined in the Ganymede server.  While
<b>&lt;permmatrix&gt;</b> provides a set of permission bits for each object or field for a Ganymede
Role, the <b>&lt;options&gt;</b> element simply provides option strings for each object type and/or field.  The main purpose
of these option strings is to control what data triggers a Sync Channel, and what data is written out to
an XML queue when a Sync Channel build is triggered.</p>
<p>Note that the <b>&lt;options&gt;</b> element was introduced in Ganymede 2.0, and is only acceptable in a Ganymede XML file with a version of at least
<code><b>major="1"</b></code>, <code><b>minor="1"</b></code>.</p>
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>Various, based on the names of object and field types defined</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr><td colspan="2">None</td></tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2">
<code>&lt;options&gt;<br/>&nbsp;&nbsp;&lt;User option="1"&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Username option="2"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;UID option="2"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Home_Group option="1"/&gt;
<br/>&nbsp;&nbsp;&lt;/User&gt;
<br/>&nbsp;&nbsp;&lt;Group option="1"&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Group_Name option="2"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;GID option="2"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Home_Users option="1"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Description option="0"/&gt;
<br/>&nbsp;&nbsp;&lt;/Group&gt;
<br/>&nbsp;&nbsp;&lt;System option="0"/&gt;
<br/>&nbsp;&nbsp;&lt;Admin_Persona option="0"/&gt;
<br/>&lt;/options&gt;</code>

<p>This simple example controls synchronization for User objects in a
specific <a href="../javadoc/arlut/csd/ganymede/server/SyncRunner.html" target="_top">Sync
Channel</a>.</p>

<p>An <b>options</b> element can contain elements for each object type
defined in the server's schema, which in turn can contain nested
elements for each custom field defined in that object's schema
definition.  Both the elements corresponding to object types and the
elements corresponding to individual field definitions will have a
single attribute, <b>option</b>, containing 0, 1, or (in the case of a
field element) 2.</p>

<p>These values correspond to the NEVER, WHENCHANGED, and ALWAYS
elements in
the <a href="../javadoc/arlut/csd/ganymede/common/SyncPrefEnum.html" target="_top">SyncPrefEnum</a>
enum class.</p>

<p>0 stands for NEVER, and means that objects of the given type (or
fields in an object type's definition) will never be synchronized to
the enclosing Sync Channel.</p>

<p>1 stands for WHENCHANGED, and means that the object or field will
be synchronized to the Sync Channel if the object or field was changed
by a transaction.</p>

<p>2 stands for ALWAYS, which is only applicable for field elements.
A field that is configured with a value of 2 will always be included
when the containing object is modified by a transaction, whether or
not that field was itself changed by the transaction.</p>

<p>See the <a href="../synchronization/index.html" target="_top">Ganymede 2.0 Sync
Guide</a> for more details on the configuration and operation of a
Ganymede Sync Channel.</p>

<p>Remember, <a href="#underscore">as always</a> with Ganymede object
type and field names in XML, any spaces in an object type name or
field name will be replaced by underscores when used as an element
name in XML dumps and loads.  In the above example,
<b>&lt;Home_Group&gt;</b> refers to the "Home Group" field in the User
object type.</p>
</td></tr>

</table></center>

<!-- PERMISSION MATRIX -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="PERMMATRIX">&lt;permmatrix&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;permmatrix&gt;</b> element contains a mapping of permission values
for object and field types defined in the Ganymede server.  The <b>&lt;permmatrix&gt;</b>
element is present in the Ganymede <b>Role</b> object, and defines what objects
and fields a given Role allows access to.
As Permission Matrix fields are scalar in Ganymede, only one
<b>&lt;permmatrix&gt;</b> element at a time may be contained in a field
element.  The <b>&lt;permmatrix&gt;</b> element is designed to contain elements
for each object type and field that permissions are set for.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>Various, based on the names of object and field types defined</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr><td colspan="2">None</td></tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2"><code>&lt;permmatrix&gt;<br/>&nbsp;&nbsp;&lt;User perm="VCED"&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Username perm="VCE"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;UID perm="VC"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Home_Group perm="VCE"/&gt;
<br/>&nbsp;&nbsp;&lt;/User&gt;
<br/>&nbsp;&nbsp;&lt;Group perm="VCED"&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Group_Name perm="VCE"/&gt;
<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;GID perm="VC"/&gt;
<br/>&nbsp;&nbsp;&lt;/Group&gt;
<br/>&lt;/permmatrix&gt;</code>
<br/>
<p>This simple example sets permission bits on the User object itself, along with the Username and UID fields defined as part of the User object type.  Object and field names contained within a <b>&lt;permmatrix&gt;</b> element are required to have a <b><code>perm</code></b> attribute, which should contain a string with any combination of the following four characters:<code><b>V</b>, <b>C</b>, <b>E</b>, <b>D</b></code>.  V stands for viewable, C stands for creatable, E for editable, and D for deletable.  V, C, and E are allowed on elements corresponding to field names.  Objects (like User in this example) may have V, C, E, and/or D.</p>
<p>The reason that the D flag is not enabled for fields is that there is no discrete notion of 'deletion' that applies to fields.  Deleting an object is a distinct operation from editing it, but deleting a field and editing a field to set its contents to empty or null amounts to the same thing in Ganymede, so we don't bother tracking delete permissions for fields.
</p>
<p>Remember, <a href="#underscore">as always</a> with Ganymede object
type and field names in XML, any spaces in an object type name or
field name will be replaced by underscores when used as an element
name in XML dumps and loads.  In the above example,
<b>&lt;Home_Group&gt;</b> refers to the "Home Group" field in the User
object type.</p> </td></tr>

</table></center>

<!-- INVID -->

<center><table border="1" cellpadding="5" width="80%">
<tr>
<td colspan="2" bgcolor="#000099"><b><font color="#FFFFCC" size="+1"><a name="INVID">&lt;invid&gt;</a></font></b></td>
</tr>

<tr>
<td colspan="2">
The <b>&lt;invid&gt;</b> element contains a Ganymede object reference
value, which is used to identify an object pointer in an invid
field on the Ganymede server.  The <b>&lt;invid&gt;</b> element must be empty.
</td>
</tr>

<tr>
<td width="50%" bgcolor="#FFFFCC"><b>Parent(s)</b></td>
<td width="50%" bgcolor="#FFFFCC"><b>Children</b></td>
</tr>

<tr>
<td>Various, based on the names of fields in an <a href="#GANYDATA">&lt;object&gt;</a></td>
<td>None</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Attributes</b></td>
</tr>

<tr>
<td colspan="2">
<dl>

<dt><b>type</b></dt>

<dd>This attribute is mandatory, and contains an XML-encoded (underscores
for spaces) object type string, with proper capitalization, to identify
the kind of object this &lt;invid&gt; element is pointing to.</dd>

<dt><b>id</b></dt>

<dd>This attribute, if present, contains a string that is meant to
uniquely identify a target object of type matching the value of the
type attribute in this &lt;invid&gt; element on the Ganymede server.
The targeted object may exist prior to XML file processing on the
Ganymede server, or it may be created by processing of other
&lt;object&gt; elements in the XML file by the xmlclient.  If an
&lt;object&gt; element of matching type with matching <b>id</b>
is defined with an <b>action</b> attribute value of <b>create</b>,
then all &lt;invid&gt; elements in the XML file with that
<b>type</b> and <b>id</b> will point to the newly created object,
and not any pre-existing object on the server that shared that
<b>type</b> and <b>id</b>.</p>

<p>The <b>id</b> attribute will match against the label field
specified for the specified object <b>type</b>.</p>
</dd>

<dt><b>num</b></dt>

<dd>This attribute, if present, holds an object number on the Ganymede
server, and is used to address a pre-existing object on the server.  This
attribute should only be used when you explicitly want to address an
object on the server, regardless of whatever other activity the
&lt;ganydata&gt; element in the XML file defines.</dd>

<dt><b>oid</b></dt>

<dd>This attribute is present when an &lt;invid&gt; element is dumped
out by a <a href="../synchronization/index.html" target="_top">Sync Channel</a>.  It is
a globally unique identifier for a pre-existing object, encoding both
the type of the object target and its specific identity.</dd>

</dl>
</td>
</tr>

<tr>
<td colspan="2" bgcolor="#FFFFCC"><b>Example</b></td>
</tr>

<tr><td colspan="2">&lt;invid type="User" id="broccol"/&gt;</td></tr>

</table></center>

<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#CCCCFF">
<td colspan="1" align="right"><h3><b>Embedded Objects</b></h3></td></tr></table>

<p>In addition to the ten field types listed above, there is one
unique case, and that is the case of embedded objects.  I need to
write about this in exhaustive detail.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCCCFF">
	<td colspan="1" align="right"><h3><b>Example</b></h3></td></tr></table>

    <p>
      For example, a user object from the GASH schema kit might be
      represented in an XML file in the following fashion:
    </p>

    <pre>
      &lt;object type="User" id="broccol"&gt;
        &lt;Username&gt;broccol&lt;/Username&gt;
        &lt;UID&gt;12003&lt;/UID&gt;
        &lt;Password&gt;&lt;password crypt="j8hgwcyw232Jo"/&gt;&lt;/Password&gt;
        &lt;Account_Category&gt;&lt;invid type="User_Category" id="normal"/&gt;&lt;/Account_Category&gt;
        &lt;Full_Name&gt;Jonathan Abbey&lt;/Full_Name&gt;
        &lt;Division&gt;CSD&lt;/Division&gt;
        &lt;Room&gt;S321&lt;/Room&gt;
        &lt;Office_Phone&gt;3199&lt;/Office_Phone&gt;
        &lt;Home_Phone&gt;335-7681&lt;/Home_Phone&gt;
        &lt;Groups&gt;
          &lt;invid type="Group" id="omsprl"/&gt;
          &lt;invid type="Group" id="omsovr"/&gt;
          &lt;invid type="Group" id="omssys"/&gt;
          &lt;invid type="Group" id="genweb"/&gt;
          &lt;invid type="Group" id="gendof"/&gt;
          &lt;invid type="Group" id="omsnet"/&gt;
          &lt;invid type="Group" id="ganycvs"/&gt;
          &lt;invid type="Group" id="omjrst"/&gt;
        &lt;/Groups&gt;
        &lt;Home_Group&gt;&lt;invid type="Group" id="omssys"/&gt;&lt;/Home_Group&gt;
        &lt;Login_Shell&gt;/bin/tcsh&lt;/Login_Shell&gt;
        &lt;Home_Directory&gt;/home/broccol&lt;/Home_Directory&gt;
        &lt;Admin_Personae&gt;
          &lt;invid type="Admin_Persona" id="broccol:GASH Admin"/&gt;
          &lt;invid type="Admin_Persona" id="broccol:supergash"/&gt;
        &lt;/Admin_Personae&gt;
        &lt;Netgroups&gt;
          &lt;invid type="User_Netgroup" id="omg-u"/&gt;
          &lt;invid type="User_Netgroup" id="omguse-u"/&gt;
          &lt;invid type="User_Netgroup" id="supad1-u"/&gt;
        &lt;/Netgroups&gt;
        &lt;Directory_Volume&gt;
          &lt;object type="Embedded_Automounter_Map_Entry" id="103" num="103"&gt;
            &lt;Automounter_Map&gt;&lt;invid type="Automounter_Map" id="2"/&gt;&lt;/Automounter_Map&gt;
            &lt;NFS_Volume&gt;&lt;invid type="NFS_Volume" id="23"/&gt;&lt;/NFS_Volume&gt;
          &lt;/object&gt;
        &lt;/Directory_Volume&gt;
        &lt;Email_Aliases&gt;
          &lt;string val="jonabbey"/&gt;
          &lt;string val="abbey"/&gt;
          &lt;string val="rust-admin"/&gt;
        &lt;/Email_Aliases&gt;
        &lt;Signature_Alias&gt;jonabbey&lt;/Signature_Alias&gt;
        &lt;Email_target&gt;
          &lt;string val="broccol@arlut.utexas.edu"/&gt;
          &lt;string val="broccol@csdsun7.arlut.utexas.edu"/&gt;
        &lt;/Email_target&gt;
        &lt;Owner_list&gt;
          &lt;invid type="Owner_Group" id="OMG"/&gt;
        &lt;/Owner_list&gt;
      &lt;/object&gt;
    </pre>
  </body>
</html>
