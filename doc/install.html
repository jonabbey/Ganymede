<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Ganymede Installation Guide</title>
  </head>

  <body bgcolor="#FFFFFF">

<img src="gifs/ganymede_title.gif" height="200" width="560" alt="Ganymede Logo"/>

<h1>Ganymede Installation Guide<br/>Release 2.0 - 22 November 2010</h1>

<hr/>

<p>Note: If you are reading this as the <code>INSTALL</code> text file
in the Ganymede distribution directory, you are missing a bunch of
hyper-links that link to extra information about many topics discussed.
If you can, view this document with a web browser as
<code>doc/install.html</code>.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>-1. Quick Install Cheat Sheet</b></h2></td>
      </tr>
    </table> 

<p>I really, really, really recommend you try and read through this whole
   document to learn how to install Ganymede, but if you absolutely,
   positively refuse to read something this long, here is the thumbnail
   sketch:</p>

<ol>
  <li>Run configure in the Ganymede distribution top-level directory</li>
  <li>Run the installServer, installClient and installWeb scripts
      generated by configure  to install the server, clients, and web
      access clients.</li>
  
  <li>Configure your web server to recognize the
      application/x-java-jnlp-file MIME type if you want to support a JNLP
      launcher such as Sun's Java Web Start (at <a
      href="http://java.sun.com/products/javawebstart/">http://java.sun.com/products/javawebstart/</a>)
      application launch manager as a convenience for your users.</li>
  
  <li>Install a schema kit on top of the server using the
      schema kit's installKit script.</li>
  
  <li>Run the server by running &lt;server-dir&gt;/bin/runServer</li>

  <li>Run the schema kit's loader.pl script to generate a data.xml
      file that will contain all the configuration information and
      directory data to be imported into the Ganymede server.</li>
  
  <li>Run &lt;server-dir&gt;/bin/xmlclient on the XML file generated
      by the schema kit's loader.pl script.</li>
</ol>

<p>Pretty easy, huh?  Of course, the devil is in the details, and
to learn about those, you'll want to read the rest of this file
in detail, as well as whatever documentation comes with any
schema kit you may be using.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>0. Overview</b></h2></td>
      </tr>
    </table> 

<p>Ganymede is a client-server system with three distinct components
that need to be installed in order to use it.  These parts are the
Ganymede server, the Ganymede client suite, and the schema kit.</p>

<p>The server acts as a central repository and control system, storing
your network directory information in its built-in object database and
updating various network services when changes are made.  The server
is designed to be installed on a UNIX system, and depends on Java and
scripting languages such as Perl or Python to carry out its internal
and external operations.</p>

<p>The Ganymede client suite includes a variety of command-line, web,
and GUI clients that can connect to the Ganymede server over the
network.  The Ganymede distribution includes a script to install
these clients on UNIX systems, but most of the clients can be accessed
over the web from a PC or Macintosh with a suitable version of Java
installed.</p>

<p>A schema kit contains all the pieces needed to turn the raw
Ganymede engine into a custom-tailored database system shaped to fit a
particular application. A schema kit defines the kinds of data to be
held in the Ganymede server's database, custom logic to provide
intelligent management of that data, and external scripts that take
the data from the Ganymede server and integrate it into your network.
Assuming that you don't want to try and develop your own database
definition from scratch, you'll want to download a pre-built schema
kit for use with your Ganymede server.</p>

<p>The Ganymede distribution that you downloaded includes everything
you need to install the server and client suite, but does not include
a schema kit.  You will need to visit <a
href="ftp://ftp.arlut.utexas.edu/pub/ganymede/">ftp://ftp.arlut.utexas.edu/pub/ganymede/</a>
or one of the mirrors listed at <a
href="http://www.arlut.utexas.edu/gash2/Download.html">http://www.arlut.utexas.edu/gash2/Download.html</a>
in order to download a schema kit.</p>

<p>This document will cover the installation of Ganymede from start to
finish, using the 1.0 version of our newly developed userKit as an
example.  Any other schema kits that are developed will have some
differences, but will likely be installed and used in similar
ways.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>1. Requirements</b></h2></td>
      </tr>
    </table> 

<p>The Ganymede system is designed to be easy to install for anyone
running a Unix or Linux system with Java, Perl, Bourne Shell, and
Apache Ant installed.  Ganymede 2.0 is designed to work with any
version of Java equal to or better than 6 (JDK1.6).  You will need the
full Java Development Kit (JDK or SDK) on your UNIX server so that you
can compile any custom plug-in classes.</p>

<p>To run the Ganymede clients in a web browser on a desktop PC
running some version of Windows, you will want to download and install
version 6 (JDK1.6) or better of the Java Runtime Environment (JRE) for
Windows.  The Java Runtime Environment for Windows includes support
for the Java Plug-In, a code module that will allow you to run the
latest JVM's inside Netscape, Internet Explorer, Mozilla, and
Firefox.</p>

<p>You can download any current version of the Java platform for
Solaris, Linux, and Windows at <a
href="http://java.sun.com/javase/">http://java.sun.com/javase/</a>.  The
Ganymede server has primarily been developed and tested on Solaris and
Linux, but the Ganymede clients have been successfully run on Solaris,
Linux, Windows XP, Vista, Mac OS X Jaguar and later, FreeBSD, AIX,
HP/UX, and others.</p>

<p>As well as Java, you will need /bin/sh, Perl 5.003 (or later), and
Apache Ant to build and install the Ganymede software.  The Ganymede
distribution, server and client, is designed to be unpacked and
installed on a UNIX-style system.  There is no graphical installer
provided for Windows.  Instead, you have to install the clients on the
UNIX or Mac OS X system and then use a web server to publish the
clients to your network, using either the Java Plugin or the Java Web
Start tools.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>2. Configuring and Building the Distribution for Your Site</b></h2></td>
      </tr>
    </table> 

<p>The Ganymede 2.0 distribution comes without any code precompiled
for you.  In order to get everything compiled and ready for you to
install, you will need to run the <a
href="glossary.html#configure">configure</a> script in the
distribution directory.  The <a
href="glossary.html#configure">configure</a> script is a
custom-written Bourne shell script which searches around on your
system to find Perl, Java, and the Apache Ant build tool, and then uses
that information to bootstrap the rest of the configuration
process.</p>

<p>One of the first things <a
href="glossary.html#configure">configure</a> will do is to build the
Ganymede software for you, and create the jar files that you will use
to deploy Ganymede.  When <a
href="glossary.html#configure">configure</a> compiles Ganymede for
you, it will create SSL key and certificate material that is unique to
your installation.  The SSL key is placed into the server's
ganymedeServer.jar file, and the matching certificate material is
placed into the client's ganymede.jar and the admin console's
ganymedeAdmin.jar files.  In this way, your Ganymede client and admin
console will be tied to your Ganymede server.  By generating unique
keys and certificates for each installation, you can be assured that
the clients you distribute are talking to your Ganymede server.</p>

<p>After building the Ganymede software, <a
href="glossary.html#configure">configure</a> will copy a few scripts
from the <b>scripts/</b> directory into the top-level distribution
directory, editing them to set the proper location for the Perl
interpreter on your system, and otherwise setting everything up for
you to proceed with installation.  These scripts are <a
href="glossary.html#installClient">installClient</a>, <a
href="glossary.html#installWeb">installWeb</a> and <a
href="glossary.html#installServer">installServer</a>.  You will use
these scripts to install the command-line UNIX clients, the web applet
clients, and the server itself, respectively.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>3. Installing the Server</b></h2></td>
      </tr>
    </table> 

<p>Installing the Ganymede server is the next thing to be done after
you have unpacked and configured the distribution.  You should plan on
installing the Ganymede server on a system that has Java and Perl
installed, and which has a web server available to provide downloads
of the Ganymede client applets for your users who will be accessing
Ganymede through a web browser.</p>

<p>The <a href="glossary.html#installServer">installServer</a> script
produced in the distribution directory by the <a
href="glossary.html#configure">configure</a> script will ask you a
series of questions, then install the Ganymede server in its own
directory.</p>

<p>These questions include the following:</p>

<dl>
<dt><b>Where are the jdk binaries located?</b></dt>
<dd>
	<p>This is just asking for the directory that contains your
	system's java binaries.  The configure script will attempt to
	provide a reasonable default for this question, but you may
	have to correct it if you have more than one version of java
	installed on your system and it chooses wrong.</p>
</dd>

<dt><b>Where should the server tree be installed?</b></dt>
<dd>
      <p>This question is asking where you want to install the server
      at in your UNIX system's filesystem.  The Ganymede server tree
      should not be installed in a location that is accessible to the
      average user, as all of your directory data is held in this
      directory tree.  There is no default answer for this question,
      so you will have to pick a location.  You can use either
      absolute or relative directory names here.</p>

      <p>Note that when you install the server, the <a
      href="glossary.html#installServer">installServer</a> script
      customizes the server installation with the paths where you have
      installed the server.  If you ever decide to move the server in
      your filesystem, you will need to create a symlink at the old
      location to allow the old paths to resolve properly, or you will
      need to go through the various scripts and files and make sure
      that any reference to the old path has been updated.</p>
</dd>

<dt><b>What is the name of the system that the server will run on?</b></dt>
<dd>
	<p>This information is used by the <a
	href="glossary.html#stopServer">stopServer</a> and <a
	href="glossary.html#xmlclient">xmlclient</a> clients that are
	installed into the server tree.  This may be an I.P. address
	or a fully qualified DNS host name.  The installServer script
	will provide the name of the system you are on as a
	default.</p>

	<p>Note that the Ganymede server needs to know a name for the
	server that will resolve to a network-accessible I.P. address.
	Some Linux systems are configured by default so that the
	system 'hostname' command returns the system's name without
	any DNS domain information, and so that the system's name is
	mapped to '127.0.0.1' in the /etc/hosts file.  On such
	systems, the Ganymede server may report an error message on
	startup, complaining that the system hostname and the
	<code><b>ganymede.serverhost</b></code> definition both
	resolve to '127.0.0.1'.</p>

	<p>By answering this question with either a fully qualified
	DNS name or a network-accessible numeric address, the Ganymede
	server will be able to generate a proper network address for
	clients to use.  If you discover after installing the server
	that you need to change the name that the Ganymede server uses
	to identify its network address, you can edit the <a
	href="glossary.html#ganymede.properties">ganymede.properties</a>
	file and change the <code><b>ganymede.serverhost</b></code>
	definition to something that will resolve to a network accessible
	address.</p>
</dd>

<dt><b>What port should the Ganymede server use for its RMI registry?</b></dt>
<dd>
	<p>The RMI registry is a network lookup service that is used
	to initialize communications between the Ganymede clients and
	the Ganymede server.  By default, port number 1099 is used for
	RMI registration. If you are running certain other Java
	services, you may already have an RMI registry running, in
	which case you should pick another port number to run the
	Ganymede registry on.  You may want to use 1100, 1101, or
	another non-used tcp port.</p>

        <p>Note that from version 2.0 onwards, the Ganymede server
        handles the RMI registration as part of its normal
        functioning, and no external rmiregistry process need be run.</p>
</dd>

<dt><b>What port should the Ganymede server use to publish its RMI objects?</b></dt>
<dd>
	<p>The answer to this question will control what TCP port
	number the Ganymede server uses to listen for communications
	from clients once the clients have logged in.  By default,
	communications to this port will be SSL encrypted.</p>
</dd>

<dt><b>What mailhost should Ganymede use to send out diagnostic mail?</b></dt>
<dd>
	<p>The Ganymede server is able to send out email in response
	to a variety of system events.  If you don't want the Ganymede
	server ever to send email, you can leave this blank.
	Otherwise you should enter the DNS name or IP address of a
	mail server that will accept unauthenticated SMTP mail from
	the Ganymede server.</p>
</dd>

<dt><b>What email address should Ganymede sign on email that it sends out?</b></dt>
<dd>
	<p>This question is asking you what Ganymede should put in the
	'From:' field of mail that it sends out in response to system
	events.  In many configurations, the Ganymede server will send
	out mail using the name of the user whose action triggered
	mail, but for things like system shutdown/restart, etc. it
	needs an email address to go by.  If this email address is not
	valid, users who reply to system event mail from Ganymede will
	have their replies bounce.</p>
</dd>

<dt><b>What name do you want the Ganymede superuser account to have?</b></dt>
<dd>
	<p>The default 'supergash' name is probably okay here, but you
	can change it if you want.  Note that you will be able to
        create additional admin accounts with superuser privileges
        later if you like, but you need to have this initial,
        generic superuser account to bootstrap the system.</p>
</dd>

<dt><b>What password do you want the superuser account to have?</b></dt>
<dd>
	<p>This password provides complete access to the Ganymede
	server's database, and is necessary for a variety of system
	operations.</p>
</dd>

<dt><b>What name do you want the Ganymede monitor account to have?</b></dt>
<dd>
	<p>The monitor account has no privileges to do anything at all
	to other than to login with the Ganymede admin console and
	view the server's activity log.</p>
</dd>

<dt><b>What password do you want the monitor account to have?</b></dt>
<dd>
	<p>This password provides the right to watch the server's
	activities using the admin console, but provides no permission
	to log into the server and view or edit any data.</p>
</dd>

</dl>

<p>Once you answer all these questions, the installServer script will
proceed to install the Ganymede server in the location specified.</p>

<p>Once installed, you will have a server directory that contains a
number of directories, some documentation files, and a <a
href="glossary.html#server.properties">ganymede.properties</a> file
that the Ganymede server executables use as a configuration
resource.</p>

<p>The <b>bin/</b> directory contains:</p>

    <ul>
      <li><a href="glossary.html#runServer">runServer</a>, which actually runs the server</li>
      <li><a href="glossary.html#stopServer">stopServer</a>, a script that can
	be used to cleanly shut the server down.</li>
      <li><a href="glossary.html#xmlclient">xmlclient</a>, a script that is
	used to load XML-formatted data into the Ganymede server.</li>
      <li><a href="glossary.html#logscan">logscan.pl</a>, a script that is
	used by the server to accelerate searches through the Ganymede <a href="glossary.html#log">log</a>
	file.</li>
    </ul>

<p>The <b>db/</b> directory contains:</p>

    <ul>
      <li>The <a href="glossary.html#ganymede.db">ganymede.db</a>
      file, which contains all data objects and schema definitions
      held by the Ganymede server.</li>
      <li>A running <a href="glossary.html#journal">journal</a> file
      that records all transactions made by the server so that the
      server can fully recover if it ever crashes or if the system
      running it goes down.</li>
      <li>A comprehensive <a href="glossary.html#log">log</a> file,
      which documents all changes made to the database.</li>
    </ul>

<p>The <b>jars/</b> directory contains the compiled java classes that
actually comprise the Ganymede server and the Java-based <a
href="glossary.html#stopServer">stopServer</a> and <a
href="glossary.html#xmlclient">xmlclient</a> clients.</p>

<p>The <b>doc/</b> directory contains copies of all of the Ganymede
documentation.</p>

<p>The <b>backups/</b> directory is used by certain schema kits to
store backup copies of any networking files written out by the schema
kit's builder tasks.  These back up copies will be written into
subdirectories that are named by date, and which will be automatically
zipped up once a day.  Nothing in this directory is used by the
Ganymede server for any purpose other than your peace of mind in case
you have a problem with the Ganymede server and need to get back an
old copy of a passwd or nis file in a pinch.  If you don't want to
spend the disk space on archival copies of your network data files,
just edit the <a
href="glossary.html#server.properties">ganymede.properties</a> file
and comment out the 'ganymede.builder.backups' property.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>4. Installing A Schema Kit</b></h2></td>
      </tr>
    </table> 

<p>Once you have the server installed, you can proceed to install a
schema kit, which will customize and configure the server for your
requirements.</p>

<p>When you download and unpack a schema kit, you should find
documentation that will walk you through the installation process.
Essentially it comes down to running a <b>installKit</b> script,
which will ask you where you installed your server and where Java
is, and will then create a <b>schema</b> directory under your server
directory.  This directory should include:</p>

<ul>
      <li>a <b>custom.jar</b> file that includes the Java classes to be
      added to your server by the schema kit</li>

      <li>a <b>src/</b> directory that contains all of the Java source
      code that was compiled into the <a
      href="glossary.html#custom.jar">custom.jar</a> file.</li>

      <li>a <b>scripts/</b> directory, that contains various Perl
      scripts used by the schema kit.</li>

      <li>an <b>output/</b> directory that contains any networking
      files that are written out by the Ganymede server when
      transactions are committed, as well as the scripts that are run
      to handle external actions when those transactions are
      committed.</li>

      <li>and finally, you will probably see some kind of loader
      script that can import data from your existing environment and
      generate an <a href="xml.html">XML file</a> for use with the <a
      href="glossary.html#xmlclient">xmlclient</a>.</li>
</ul>

<p>The most important of these as far as the server is concerned is the <a
href="glossary.html#custom.jar">custom.jar</a> file.  Once that file
is in place, you can proceed to run the Ganymede server, which will
then start up and find the extra classes needed to run the server with your
schema kit.</p>

<p>The schema kit that you install should include a README that will
talk in great detail about the operational aspects of running the
server with that schema kit installed.  This will include but is not
limited to what sort of data is written out to disk when transactions
are committed in the server, and how that data is integrated into the
network environment.</p>

<p>For now, however, we are going to continue with a generic
discussion of how one runs the server, how one typically loads
data into the server, etc.  For further details on all of this
works with the schema kit you choose to use, see the schema kit
README file.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>5. Running the Ganymede Server</b></h2></td>
      </tr>
    </table> 

<p>Once you have installed your schema kit, you can go ahead and run
the server.  You do this by running the <a
href="glossary.html#runServer">runServer</a> script in the server's
<b>bin/</b> directory.</p>

<p>The Ganymede server is a pure Java application, so when you run it,
you are really running your platform's java execution environment
(which may be an interpreter, a JIT compiler, or an advanced hybrid).
Java doesn't provide a lot of access to operating-system level
functionality, so the Ganymede server doesn't know how to detach
itself from your terminal window or console, and it doesn't know how
to respond gracefully to kill signals.</p>

<p>The Ganymede 2.0 runServer script takes care of detaching the
Ganymede server from the console and automatically captures the
server's stdout and stderr streams to the <code>server.log</code> file
in the server installation directory.</p>

<p>You can view the server's log as the server runs with the
<code>tail</code> command, using the <code>-f</code> option, as
follows:</p>

<pre>
      server% tail -f server.log
</pre>

<p>That way, if your window is killed or you absent-mindedly hit
ctrl-c, you will only kill off the <code>tail</code> command.  You
want the server itself to run in the background, undisturbed.</p>

<p>The <b>installServer</b> script is pre-configured with various
options to run the Ganymede server smoothly on your system.  If you
look at <a href="glossary.html#runServer">runServer</a>, however, you
will see that there are a number of ways you can edit the <a
href="glossary.html#runServer">runServer</a> script to tweak the
Ganymede server's behavior.</p>

<p>Of particular interest in this regard are the
<code>-resetadmin</code> and the <code>-logrmi</code> parameters.
These are both documented in the <a
href="glossary.html#runServer">runServer</a> script itself, but it is
worth discussing them here.  The <code>-resetadmin</code> parameter
causes the Ganymede server to reset the administrative 'supergash'
password in the system to the value defined in the server's <a
href="glossary.html#server.properties">ganymede.properties</a> file.
It is reasonable to remove the 'ganymede.defaultrootpass' property
from the <a
href="glossary.html#server.properties">ganymede.properties</a> file if
you don't want to leave your Ganymede 'root' password lying around in
plaintext, but if you ever forget the password, you'll want to keep
the <code>-resetadmin</code> parameter option in mind.  You should not
remove the ganymede.defaultrootpass property until the server has
successfully started up and created its <a
href="glossary.html#ganymede.db">ganymede.db</a> file at least once,
however.</p>

<p>If the <code>-logrmi</code> parameter is used, the Ganymede server
will log all network calls made by clients to a file titled
debug.log..  This may degrade performance very slightly, but it will
provide an invaluable trace and exception log if the server ever hangs
or crashes.  Unless you know you will never need to worry about the
possibility of exceptions in the server, I'd recommend you leave the
<code>-logrmi</code> parameter as you find it.  The
<b>installServer</b> script will install the <a
href="glossary.html#runServer">runServer</a> script with
<code>-logrmi</code> enabled.  If you want to have the RMI log placed
somewhere else, you can use <code>logrmi=filename</code> rather than
accepting the default RMI log file that <code>-logrmi</code> will
generate for you.</p>

<p>While the server is running, you should see at least one Java
process running, that being the Ganymede server.  If you are running
the Ganymede server on certain older versions of the Linux system, you
may see what looks like a very large number of Java processes running.
This is perfectly normal.  In those versions of Linux, the
<code>ps</code> and <code>top</code> commands will show you a separate
entry for each thread that is running in a given process.  The
Ganymede server is heavily multithreaded, so you should expect to see
a bunch of Java threads running on such a Linux system.</p>

<p>When you want to shut the server down, you'll just need to order it
to shut down from the Ganymede admin console (which we'll talk about
below), or by using the <a
href="glossary.html#stopServer">stopServer</a> script in the server's
<b>bin/</b> directory.  Either one will transmit to the server a
shutdown message, which will result in the server kicking any active
users off the system, consolidating its database to disk, and finally
shutting down.  The Ganymede server is designed to recover smoothly on
restart if it is killed or if the system crashes or is rebooted at any
point during its execution, but if the server is not shut down
cleanly, it might spend a bit of time consolidating data from its
journal when it starts up again.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>6. Loading Data Into the Server</b></h2></td>
      </tr>
    </table> 

<p>Now you have installed the server, integrated a schema kit into the
server directory, and started the server running.  You can now proceed
to use the schema kit to load data into the server.</p>

<p>When you first run the Ganymede server, the server will look in its
<b>db/</b> directory for its <a
href="glossary.html#ganymede.db">ganymede.db</a> file.  When it
doesn't find it, it will initialize itself with its default database
configuration.  The Ganymede server will only know about those objects
and fields that it uses for its own operations.  Before the Ganymede
server can handle the data for your network's directories, you will
need to define your custom object and field types in the Ganymede
server.</p>

<p>The Ganymede admin console has an 'Edit Schema' menu item which you
can use to bring up a graphical schema editor.  With the schema
editor, you can define new object types and define fields within the
object types.  Designing and implementing a new schema definition is a
bit involved, and is beyond the scope of this installation guide.</p>

<p>Fortunately for you, though, you're using a schema kit, so we will
just let it do that work.  For the rest of this discussion, we'll
pretend you have downloaded and installed a schema kit that is almost
entirely not unlike the <b>userKit</b> schema kit that we are
releasing with Ganymede 2.0.  If you are not using that schema kit,
you'll have to improvise along the same lines.</p>

<p>If you look in the <b>schema/</b> directory that the schema kit's
<b>installKit</b> script placed in your server directory, you should
see a <b>loader.pl</b> script and a <b>schema.xml</b> file.  The
<b>loader.pl</b> script is designed to take the database definition
information contained in the <b>schema.xml</b> file and combine it
with your data to create a <b>data.xml</b> file that you can then load
into the Ganymede server.</p>

<p>Actually running the <b>loader.pl</b> script should be relatively
straight forward, but you will want to consult the schema kit's
documentation for information on what sort of data it can import, what
configuration options the schema kit's plug-in logic classes support,
and the full details on integrating Ganymede and that schema kit
into your environment.</p>

<p>For now, we'll just assume that <b>loader.pl</b> has produced a
<b>data.xml</b> file that is formatted according to the <a
href="xml.html">Ganymede XML File Format Guide</a>.  Now all you need
to do is cd to your server's top-level directory and run</p>

<pre>
      server% bin/xmlclient schema/data.xml
</pre>

<p>This will cause the <a href="glossary.html#xmlclient">xmlclient</a>
to log into the server and upload both the schema kit's schema
definition and your data to the server.  <a
href="glossary.html#xmlclient">xmlclient</a> will produce some output
while it runs, but it is designed for speed over interactivity, and so
it may go quiet for long periods of time while it waits for the server
to chew through the XML that it has submitted.  If you like, you can
run the Ganymede admin console before starting <a
href="glossary.html#xmlclient">xmlclient</a> and actually watch as the
<a href="glossary.html#xmlclient">xmlclient</a> talks to the server
and creates all your objects in the database.</p>

<p>If all goes well, you should expect to see a bunch of messages
about it editing the server's schema and then creating a bunch of
objects from your data.  If something goes amiss, you should see some
information telling you where in the xml data stream it found
something that it didn't like.  With luck, a little hand-editing of
the <b>data.xml</b> file will let you put things right and try
again.</p>

<p>There is quite a lot more to say about how the schema kits are
constructed and how they operate, but this isn't the place for it.
Check in the schema kit for documentation on operations with the
schema kit.  For now, be aware that the <b>data.xml</b> file generated
by the userKit's <b>loader.pl</b> script is designed to initialize the
Ganymede database from scratch, and not to import new data to a server
that has already been up and running with data for awhile.  For the
full story on how to write XML files to do data editing in the
Ganymede server, see the <a href="xml.html">xml.html</a> file in the
<b>doc/</b> directory.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>7. Installing UNIX Client Files</b></h2></td>
      </tr>
    </table> 
    
<p>The Ganymede system has two primary clients, the Ganymede GUI
client and the Ganymede admin console.  Both can be run from a UNIX
command line with a shell script that will run java on them, or from a
web browser with support for Java 6 (JDK1.6) or better.</p>

<p>We have provided an install script for installing the Ganymede
clients on a UNIX system.  <a
href="glossary.html#installClient">installClient</a> will prompt you
for the name of the machine that will be running your Ganymede server,
and the directory which will contain the bin, html, and jars
directories. The install script will then customize and install
scripts for you so that the end-user client and admin console can
easily be run.</p>

<p>Don't try to install the client files and the server into the same
directory.. the two are meant to be installed separately, in separate
directories. This is important because the server files need to be
kept out of the reach of non-privileged users, while the client files
are intended to be available for anyone to run.</p>

<p>Note that we don't provide any kind of script to install the
Ganymede clients on a Windows or Macintosh system directly, but you
can use a JNLP launcher to achieve this.  See the <a
href="#webconfig">Web Server Configuration</a> section of this
document, below, for details on supporting JNLP launch.</p>

<p>In general, you should be able to run the Ganymede clients on any
platform that supports Java 1.6 or better, as the clients are written
in pure Java.  The Ganymede clients are dual-mode, and will work both
as an applet and as a command line application.  If you are trying to
run the clients on a platform that supports Java 1.6 but which doesn't
have a JNLP launcher available, you may want to examine the <a
href="glossary.html#ganymede">ganymede</a> and <a
href="glossary.html#ganymedeAdmin">ganymedeAdmin</a> launch scripts
installed by the <a
href="glossary.html#installClient">installClient</a> script and create
appropriate translations of the launch scripts for your platform.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><h2><b>8. Prepare web access clients</b></h2></td>
      </tr>
    </table> 
    
<p>The <a href="glossary.html#installWeb">installWeb</a> script is
used to install, on your UNIX system, the html, cgi, JNLP and java
files needed to support client access to Ganymede from a web browser.
When you run <a href="glossary.html#installWeb">installWeb</a>, it
will ask you a small number of questions, including the following:</p>

<dl>
<dt><b>What is the name of the system that the server will run on?</b></dt>
<dd>
	<p>This question is used to configure the applet launch page
	that your users will access to run the Ganymede applets.  This
	should be the name of the system on which you are going to run
	the Ganymede server.</p>
</dd>
<dt><b>What port is the RMI registry supporting Ganymede running on?</b></dt>
<dd>
	<p>As with installClient and installServer, this is asking you
	for the port number that the Ganymede server is placing its
	internal rmiregistry on.  This number must match the one used
	when you installed the server.</p>
</dd>
<dt><b>Where should the web access files be installed?</b></dt>
<dd>
	<p>This is asking for the name of a directory in which to
	install the web access files.  If this directory does not
	exist, it will be created in the directory containing it.
	This directory will need to be mappable to a url by a web
	server running on the same machine that will be running your
	Ganymede server.</p>
</dd>

<dt><b>What URL path will resolve to the ganymede web access directory?</b></dt>
<dd>
      <p>This question is asking what URL the installed web access files
      will map to in your web server.  The installWeb script needs this
      information in order to configure the Java Network Launch Protocol (JNLP)
      files for the Ganymede client and admin console for use with the
      <a href="http://java.sun.com/products/javawebstart/">Java Web Start</a>
      launch manager.</p>

      <p>If you don't get this right when you install the clients, the Java Web Start
      option will not work properly.  You can edit the installed client.jnlp and console.jnlp
      files to fix this after the fact, if need be.</p>
</dd>

<dt><b>Where will the ganymede client binaries be installed?</b></dt>
<dd>
	<p>This is asking for the directory that contains (or will
	contain) the Ganymede text mode clients, in particular <a
	href="glossary.html#xmlclient">xmlclient</a>.  The directory
	containing <a href="glossary.html#xmlclient">xmlclient</a>
	must be accessible by the user account that your web server
	runs under, so that the <a
	href="glossary.html#ganypass">ganypass.pl</a> CGI script can
	properly communicate with the Ganymede server.</p>
</dd>
</dl>

<p><a href="glossary.html#installWeb">installWeb</a> will configure
and install a bunch of files into a designated directory, including an
index.html file, a couple of jar files containing the classes for the
Ganymede gui client and admin console, a CGI script that will allow
your users to change their passwords through their web browser using
an HTML file, and various support files.  These files are customized
during installation to point to the proper location for your Ganymede
server.</p>

<p>With Java RMI-using applets, it is typically necessary to download
the applets from a web server running on the same machine as the
RMI server, so that the default restrictions on an unprivileged
applet suffice to allow a network connection to be made back to the
RMI server. The Ganymede 2.0 applets are signed, however, so you
are not required to run a web server on the same machine as
your Ganymede server, as you were for the Ganymede 1.0 series.
Running a web server on your Ganymede server may make it easier to
redeploy the client jar files and etc., if you need to upgrade
things later, though.</p>

<p>Wherever you decided to serve the Ganymede clients from, you'll
probably want to set up an appropriate path or alias.  If you are
using Apache, you might set up an alias in your httpd.conf file that
maps a URL path like "/ganymede" to your web client directory.
Whatever directory you are serving Ganymede files from should be
configured to allow running CGI scripts with the extension '.pl', to
support the password change CGI script that is installed in that
directory, if you want that.  If you want to support the <a
href="http://java.sun.com/products/javawebstart/">Java Web Start</a>
launch option, you will also need to configure your web server to
recognize .jnlp files as being of MIME type
application/x-java-jnlp-file.  See section 9, below, for details on
this.</p>

<p>Once the web server has been configured and the web clients
installed, your users will be able to access your web client directory
to run the Ganymede applet launcher (through the index.html file), or
to run the Ganymede password change CGI script, <a
href="glossary.html#ganypass">ganypass.pl</a>.  The <a
href="glossary.html#ganypass">ganypass.pl</a> script is useful because
it allows any web browser that supports HTML forms to be used to
change a user's password, whereas the full Ganymede client launcher
requires both JavaScript and Java support.</p>

<p>If you do want your users to be able to run the full Ganymede
client, you will need to be sure that their web browsers are
configured properly, either with support for running Java 1.6 applets
directly, or for passing a JNLP file to Java Web Start.</p>

<p><b>IMPORTANT NOTE</b>: whenever you run applets from the launch
page using the 'Native' or 'Java Plug In' modes, the applets can only
run as long as the log-in applet is still displayed in the web
browser.  If you close the main browser window or click to a different
page (either by following a link or by clicking back on the browser),
the applet will be shut down.  Both the Ganymede client and admin
console have been written so that this shut-down is handled in an
orderly fashion, but the shut-down is unavoidable, so be sure not to
disturb the applet frame while you are using the client or
console.</p>

<p>In general, we recommend the 'Java Web Start' launch method above
all others, but you do need to do a bit more configuration work to
support this option.</p>

    <table border="1" cellpadding="3" cellspacing="0" width="100%">
      <tr bgcolor="#CCFFCC">
	<td colspan="1"><a name="webconfig"/><h2><b>9. Configure your web server to support <a href="http://java.sun.com/products/javawebstart/">Java Web Start</a></b></h2></td>
      </tr>
    </table> 

    <p>Ganymede supports the use of Sun's Java Web Start (at <a
    href="http://java.sun.com/products/javawebstart/">http://java.sun.com/products/javawebstart/</a>)
    to handle launching the Ganymede client and admin console.  With
    Java Web Start, your users should be able to run the Ganymede
    client applets on their Windows or Linux desktops without needing
    to bother with a web browser.  Users on platforms other than
    Windows may want to look at the OpenJNLP project at <a
    href="http://openjnlp.nanode.org/">http://openjnlp.nanode.org/</a>
    or the JavaURL project at <a
    href="http://www.amherst.edu/~tliron/javaurl/">http://www.amherst.edu/~tliron/javaurl/</a>.</p>

    <p>In order to support any JNLP launcher service on the client,
    your web server has to be configured to identify the proper MIME
    type for the Java Network Launch Protocol (.jnlp) files that tell
    the Java Web Start system how to manage the Ganymede clients.</p>

    <p>If you are running Apache, configuring your web server to
    support the Java Web Start option for launching the Ganymede
    clients is simple.  You just need to add the following line to
    your httpd.conf:</p>

    <pre>
        AddType application/x-java-jnlp-file .jnlp
    </pre>

    <p>Alternately, you can add the following line to your server's mime.types
    file:</p>

    <pre>
        application/x-java-jnlp-file jnlp
    </pre>

    <p>Whichever approach you choose, you may need to cause your web
    server to re-read its configuration file.  With an Apache server,
    this can be achieved by sending a HUP signal to the server.  If
    you don't know what that means, simply stopping and restarting
    your web server should work too.</p>

    <p>In addition to the server-side configuration, your users' web
    browsers must be configured to run the JNLP launcher when a
    resource of MIME type <code>application/x-java-jnlp-file</code> is
    downloaded.  The Java Web Start package should take care of that
    automatically on Windows and Mac OS X, but on a Linux or FreeBSD
    system, your users may have to do some manual configuration.</p>

    <p>If you don't configure your server and your users' clients for
    the use of JNLP, your users will not be able to use the Java Web
    Start launch option, but they should still be able to run the
    Ganymede clients from their web browser, with somewhat less
    convenience.</p>

    <hr/>

    <address><a href="mailto:jonabbey@arlut.utexas.edu">Jonathan Abbey</a></address>

    <p><i>This article is translated
    to <a href="http://science.webhostinggeeks.com/ganymede-upustvo">Serbo-Croatian</a>
    language by Anja Skrba from <a href="http://webhostinggeeks.com/">
    Webhostinggeeks.com</a></i>.</p>
  </body>
</html>
